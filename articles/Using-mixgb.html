<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mixgb">
<title>mixgb: Multiple Imputation Through XGBoost • mixgb</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="mixgb: Multiple Imputation Through XGBoost">
<meta property="og:description" content="mixgb">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mixgb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Imputing-newdata.html">Imputing newdata with a saved mixgb imputer</a>
    <a class="dropdown-item" href="../articles/Using-mixgb.html">mixgb: Multiple Imputation Through XGBoost</a>
    <a class="dropdown-item" href="../articles/web/Visual-diagnostics.html">Visual diagnostics for multiply imputed values</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/agnesdeng/mixgb/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Using-mixgb_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>mixgb: Multiple Imputation Through XGBoost</h1>
                        <h4 data-toc-skip class="author">Yongshi Deng</h4>
            
            <h4 data-toc-skip class="date">2022-06-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/agnesdeng/mixgb/blob/HEAD/vignettes/Using-mixgb.Rmd" class="external-link"><code>vignettes/Using-mixgb.Rmd</code></a></small>
      <div class="d-none name"><code>Using-mixgb.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Mixgb offers a scalable solution for imputing large datasets using XGBoost, bootstrapping and predictive mean matching. Mixgb is built under Fully Conditional Specification (FCS), where XGBoost imputation models are built for each incomplete variable. Mixgb can automatically handle different types of variables and users do not need to encode categorical variables themselves. Users can also choose different settings regarding bootstrapping and the types predictive mean matching to enhance imputation performance.</p>
</div>
<div class="section level2">
<h2 id="impute-missing-values-with-mixgb">Impute missing values with <code>mixgb</code><a class="anchor" aria-label="anchor" href="#impute-missing-values-with-mixgb"></a>
</h2>
<p>We first load the <code>mixgb</code> package and the <code>nhanes3_newborn</code> dataset, which contains 16 variables of various types (integer/numeric/factor/ordinal factor). There are 9 variables with missing values.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/agnesdeng/mixgb" class="external-link">mixgb</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">nhanes3_newborn</span><span class="op">)</span>
<span class="co">#&gt; tibble [2,107 × 16] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ HSHSIZER: int [1:2107] 4 3 5 4 4 3 5 3 3 3 ...</span>
<span class="co">#&gt;  $ HSAGEIR : int [1:2107] 2 5 10 10 8 3 10 7 2 7 ...</span>
<span class="co">#&gt;  $ HSSEX   : Factor w/ 2 levels "1","2": 2 1 2 2 1 1 2 2 2 1 ...</span>
<span class="co">#&gt;  $ DMARACER: Factor w/ 3 levels "1","2","3": 1 1 2 1 1 1 2 1 2 2 ...</span>
<span class="co">#&gt;  $ DMAETHNR: Factor w/ 3 levels "1","2","3": 3 1 3 3 3 3 3 3 3 3 ...</span>
<span class="co">#&gt;  $ DMARETHN: Factor w/ 4 levels "1","2","3","4": 1 3 2 1 1 1 2 1 2 2 ...</span>
<span class="co">#&gt;  $ BMPHEAD : num [1:2107] 39.3 45.4 43.9 45.8 44.9 42.2 45.8 NA 40.2 44.5 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Head circumference (cm)"</span>
<span class="co">#&gt;  $ BMPRECUM: num [1:2107] 59.5 69.2 69.8 73.8 69 61.7 74.8 NA 64.5 70.2 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Recumbent length (cm)"</span>
<span class="co">#&gt;  $ BMPSB1  : num [1:2107] 8.2 13 6 8 8.2 9.4 5.2 NA 7 5.9 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "First subscapular skinfold (mm)"</span>
<span class="co">#&gt;  $ BMPSB2  : num [1:2107] 8 13 5.6 10 7.8 8.4 5.2 NA 7 5.4 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Second subscapular skinfold (mm)"</span>
<span class="co">#&gt;  $ BMPTR1  : num [1:2107] 9 15.6 7 16.4 9.8 9.6 5.8 NA 11 6.8 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "First triceps skinfold (mm)"</span>
<span class="co">#&gt;  $ BMPTR2  : num [1:2107] 9.4 14 8.2 12 8.8 8.2 6.6 NA 10.9 7.6 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Second triceps skinfold (mm)"</span>
<span class="co">#&gt;  $ BMPWT   : num [1:2107] 6.35 9.45 7.15 10.7 9.35 7.15 8.35 NA 7.35 8.65 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Weight (kg)"</span>
<span class="co">#&gt;  $ DMPPIR  : num [1:2107] 3.186 1.269 0.416 2.063 1.464 ...</span>
<span class="co">#&gt;   ..- attr(*, "label")= chr "Poverty income ratio"</span>
<span class="co">#&gt;  $ HFF1    : Factor w/ 2 levels "1","2": 2 2 1 1 1 2 2 1 2 1 ...</span>
<span class="co">#&gt;  $ HYD1    : Ord.factor w/ 5 levels "1"&lt;"2"&lt;"3"&lt;"4"&lt;..: 1 3 1 1 1 1 1 1 2 1 ...</span>
<span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">nhanes3_newborn</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; HSHSIZER  HSAGEIR    HSSEX DMARACER DMAETHNR DMARETHN  BMPHEAD BMPRECUM </span>
<span class="co">#&gt;        0        0        0        0        0        0      124      114 </span>
<span class="co">#&gt;   BMPSB1   BMPSB2   BMPTR1   BMPTR2    BMPWT   DMPPIR     HFF1     HYD1 </span>
<span class="co">#&gt;      161      169      124      167      117      192        7        0</span></code></pre></div>
<p>To impute this dataset, we can use the default settings. The default number of imputed datasets <code>m = 5</code>. Note that we do not need to convert our data into dgCMatrix or one-hot coding format. Our package will convert it automatically. Variables should be of the following types: numeric, integer, factor or ordinal factor.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># use mixgb with default settings</span>
<span class="va">imputed.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Mixgb.html">mixgb</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, m <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="customise-imputation-settings">Customise imputation settings<a class="anchor" aria-label="anchor" href="#customise-imputation-settings"></a>
</h3>
<p>We can also customise imputation settings:</p>
<ul>
<li><p>The number of imputed datasets <code>m</code></p></li>
<li><p>The number of imputation iterations <code>maxit</code></p></li>
<li><p>Whether to convert ordinal factors to integer (imputation process will be faster) <code>ordinalAsInteger</code></p></li>
<li><p>Whether to use bootstrapping <code>bootstrap</code></p></li>
<li><p>Predictive mean matching settings <code>pmm.type</code>, <code>pmm.k</code> and <code>pmm.link</code>.</p></li>
<li><p>Initial imputation methods for different types of variables <code>initial.num</code>, <code>initial.int</code> and <code>initial.fac</code>.</p></li>
<li><p>Whether to save models for imputing newdata <code>save.models</code> and <code>save.vars</code>.</p></li>
<li><p>XGBoost hyperparameters and verbose settings. <code>xgb.params</code>, <code>nrounds</code>, <code>early_stopping_rounds</code>, <code>print_every_n</code> and <code>verbose</code>.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use mixgb with chosen settings</span>
<span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  max_depth <span class="op">=</span> <span class="fl">6</span>,
  gamma <span class="op">=</span> <span class="fl">0.1</span>,
  eta <span class="op">=</span> <span class="fl">0.3</span>,
  min_child_weight <span class="op">=</span> <span class="fl">1</span>,
  subsample <span class="op">=</span> <span class="fl">1</span>,
  colsample_bytree <span class="op">=</span> <span class="fl">1</span>,
  colsample_bylevel <span class="op">=</span> <span class="fl">1</span>,
  colsample_bynode <span class="op">=</span> <span class="fl">1</span>,
  nthread <span class="op">=</span> <span class="fl">4</span>,
  tree_method <span class="op">=</span> <span class="st">"auto"</span>,
  gpu_id <span class="op">=</span> <span class="fl">0</span>,
  predictor <span class="op">=</span> <span class="st">"auto"</span>
<span class="op">)</span>

<span class="va">imputed.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Mixgb.html">mixgb</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, m <span class="op">=</span> <span class="fl">5</span>, maxit <span class="op">=</span> <span class="fl">1</span>,
  ordinalAsInteger <span class="op">=</span> <span class="cn">TRUE</span>, bootstrap <span class="op">=</span> <span class="cn">TRUE</span>,
  pmm.type <span class="op">=</span> <span class="st">"auto"</span>, pmm.k <span class="op">=</span> <span class="fl">5</span>, pmm.link <span class="op">=</span> <span class="st">"prob"</span>,
  initial.num <span class="op">=</span> <span class="st">"normal"</span>, initial.int <span class="op">=</span> <span class="st">"mode"</span>, initial.fac <span class="op">=</span> <span class="st">"mode"</span>,
  save.models <span class="op">=</span> <span class="cn">FALSE</span>, save.vars <span class="op">=</span> <span class="cn">NULL</span>,
  xgb.params <span class="op">=</span> <span class="va">params</span>, nrounds <span class="op">=</span> <span class="fl">50</span>, early_stopping_rounds <span class="op">=</span> <span class="fl">10</span>, print_every_n <span class="op">=</span> <span class="fl">10L</span>, verbose <span class="op">=</span> <span class="fl">0</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tune-hyperparameters">Tune hyperparameters<a class="anchor" aria-label="anchor" href="#tune-hyperparameters"></a>
</h3>
<p>Imputation performance can be affected by the hyperparameter settings. It may seem daunting to tune a large set of hyperparameters, but often we can narrow down the search as many hyperparameters are correlated. In our package, we have a function <code><a href="../reference/mixgb_cv.html">mixgb_cv()</a></code> to tune <code>nrounds</code>. There is no default <code>nrounds</code> value in <code>XGBoost,</code> so we need to specify it. The default <code>nrounds</code> in <code>mixgb</code> is 50. However, we recommend using <code><a href="../reference/mixgb_cv.html">mixgb_cv()</a></code> to find the optimal <code>nrounds</code> first.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cv.results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mixgb_cv.html">mixgb_cv</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">cv.results</span><span class="op">$</span><span class="va">evaluation.log</span>
<span class="co">#&gt;     iter train_logloss_mean train_logloss_std test_logloss_mean</span>
<span class="co">#&gt;  1:    1          0.6212373       0.003087148         0.6544741</span>
<span class="co">#&gt;  2:    2          0.5761076       0.004481774         0.6400033</span>
<span class="co">#&gt;  3:    3          0.5418532       0.004653500         0.6327963</span>
<span class="co">#&gt;  4:    4          0.5171194       0.003208377         0.6291934</span>
<span class="co">#&gt;  5:    5          0.4935356       0.004328236         0.6298326</span>
<span class="co">#&gt;  6:    6          0.4764609       0.005864608         0.6308498</span>
<span class="co">#&gt;  7:    7          0.4590362       0.006415388         0.6312819</span>
<span class="co">#&gt;  8:    8          0.4422859       0.006273271         0.6319554</span>
<span class="co">#&gt;  9:    9          0.4317392       0.006539232         0.6322793</span>
<span class="co">#&gt; 10:   10          0.4195118       0.009329865         0.6344269</span>
<span class="co">#&gt; 11:   11          0.4084496       0.012192216         0.6375104</span>
<span class="co">#&gt; 12:   12          0.3994073       0.014490718         0.6389952</span>
<span class="co">#&gt; 13:   13          0.3845769       0.012026833         0.6414825</span>
<span class="co">#&gt; 14:   14          0.3778067       0.011103745         0.6427866</span>
<span class="co">#&gt;     test_logloss_std</span>
<span class="co">#&gt;  1:      0.006251109</span>
<span class="co">#&gt;  2:      0.009186692</span>
<span class="co">#&gt;  3:      0.012334947</span>
<span class="co">#&gt;  4:      0.016384662</span>
<span class="co">#&gt;  5:      0.017224571</span>
<span class="co">#&gt;  6:      0.018426714</span>
<span class="co">#&gt;  7:      0.017717139</span>
<span class="co">#&gt;  8:      0.017078119</span>
<span class="co">#&gt;  9:      0.015731057</span>
<span class="co">#&gt; 10:      0.015823653</span>
<span class="co">#&gt; 11:      0.014086029</span>
<span class="co">#&gt; 12:      0.015461390</span>
<span class="co">#&gt; 13:      0.016173236</span>
<span class="co">#&gt; 14:      0.016093928</span>
<span class="va">cv.results</span><span class="op">$</span><span class="va">response</span>
<span class="co">#&gt; [1] "HFF1"</span>
<span class="va">cv.results</span><span class="op">$</span><span class="va">best.nrounds</span>
<span class="co">#&gt; [1] 4</span></code></pre></div>
<p>By default, <code><a href="../reference/mixgb_cv.html">mixgb_cv()</a></code> will randomly choose an incomplete variable as the response and build an XGBoost model with other variables using the complete cases of the dataset. Therefore, each run of <code><a href="../reference/mixgb_cv.html">mixgb_cv()</a></code> is likely to return different results. Users can also specify the response and covariates in the argument <code>response</code> and <code>select_features</code>, respectively.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cv.results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mixgb_cv.html">mixgb_cv</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, nfold <span class="op">=</span> <span class="fl">10</span>, nrounds <span class="op">=</span> <span class="fl">100</span>, early_stopping_rounds <span class="op">=</span> <span class="fl">1</span>, 
                       response <span class="op">=</span> <span class="st">"BMPHEAD"</span>, select_features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HSAGEIR"</span>, <span class="st">"HSSEX"</span>, <span class="st">"DMARETHN"</span>, <span class="st">"BMPRECUM"</span>,                           <span class="st">"BMPSB1"</span>, <span class="st">"BMPSB2"</span>, <span class="st">"BMPTR1"</span>, <span class="st">"BMPTR2"</span>, <span class="st">"BMPWT"</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">cv.results</span><span class="op">$</span><span class="va">best.nrounds</span>
<span class="co">#&gt; [1] 18</span></code></pre></div>
<p>Since using <code><a href="../reference/mixgb_cv.html">mixgb_cv()</a></code> with this dataset mostly returns a number less than <code>20</code>, I’ll set <code>nrounds = 20</code> in <code><a href="../reference/Mixgb.html">mixgb()</a></code> to obtain <code>m</code> imputed datasets.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">imputed.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Mixgb.html">mixgb</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, m <span class="op">=</span> <span class="fl">5</span>, nrounds <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></code></pre></div>
<div class="section level4">
<h4 id="convert-ordinal-factors-to-integers">Convert ordinal factors to integers<a class="anchor" aria-label="anchor" href="#convert-ordinal-factors-to-integers"></a>
</h4>
<p>If our dataset has ordinal factors, then the imputation process will be sped up by converting them to integers. In <code>nhanes3_newborn</code> data, there is only one ordinal factor, but we can still see that the imputation time is smaller with <code>ordinalAsInteger = TRUE</code>. If <code>m</code> and <code>maxit</code> are larger, the difference will be even more obvious. Note that when <code>ordinalAsInteger = TRUE</code> , the class of these ordinal factors in the imputed datasets will also be integer. We recommend to use the default PMM setting <code>pmm.type = "auto"</code>, which will impute numeric and integer variables with PMM (type 2) and impute categorical variables without PMM. If we don’t apply PMM to integer variables, the missing values may be imputed as numeric. Sometimes this can be problematic, especially when the integers are actually converted from ordinal factors. Therefore, <code>pmm.type = NULL</code> is disabled when <code>ordinalAsInteger = TRUE</code> .</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">imputed.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Mixgb.html">mixgb</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, m <span class="op">=</span> <span class="fl">5</span>, maxit <span class="op">=</span> <span class="fl">1</span>, ordinalAsInteger <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;  14.734   0.235   9.161</span>

<span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">imputed.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Mixgb.html">mixgb</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes3_newborn</span>, m <span class="op">=</span> <span class="fl">5</span>, maxit <span class="op">=</span> <span class="fl">1</span>, ordinalAsInteger <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;  13.567   0.208   8.268</span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="inspect-multiply-imputed-values">Inspect multiply imputed values<a class="anchor" aria-label="anchor" href="#inspect-multiply-imputed-values"></a>
</h2>
<p>The <code>mixgb</code> package provides the following visual diagnostics functions:</p>
<ol style="list-style-type: lower-roman">
<li><p>Single variable: <code><a href="../reference/plot_hist.html">plot_hist()</a></code>, <code><a href="../reference/plot_box.html">plot_box()</a></code>, <code><a href="../reference/plot_bar.html">plot_bar()</a></code> ;</p></li>
<li><p>Two variables: <code><a href="../reference/plot_2num.html">plot_2num()</a></code>, <code><a href="../reference/plot_2fac.html">plot_2fac()</a></code>, <code><a href="../reference/plot_1num1fac.html">plot_1num1fac()</a></code> ;</p></li>
<li><p>Three variables: <code><a href="../reference/plot_2num1fac.html">plot_2num1fac()</a></code>, <code><a href="../reference/plot_1num2fac.html">plot_1num2fac()</a></code>.</p></li>
</ol>
<p>Each function will return <code>m+1</code> panels to compare the observed data with <code>m</code> sets of actual imputed values.</p>
<p>For more details, please check the vignette on github <a href="https://agnesdeng.github.io/mixgb/articles/web/Visual-diagnostics.html">Visual diagnostics for multiply imputed values</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Yongshi Deng.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
